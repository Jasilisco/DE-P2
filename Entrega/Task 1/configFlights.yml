datasources: 
  flights: 
    name: '../DATASETS/flights.csv'
    base: True
  airports: 
    name: '../DATASETS/airports.csv'
    rename: {IATA_CODE: IATA_AIRPORT}
    mergeLogic: 
      base: ORIGIN_AIRPORT
      field: IATA_AIRPORT
  airlines: 
    name: '../DATASETS/airlines.csv'
    rename: {IATA_CODE: IATA_AIRLINE}
    mergeLogic: 
      base: AIRLINE
      field: IATA_AIRLINE

database:
  sqlScript: '../dataFlightsLab.sql'
  user: root
  password: admin
  host: localhost
  port: 3306
  name: flights

tables:
  datedimension:
    DateID:
      autogenerated: True
    Year:
      value: YEAR
    Month:
      value: MONTH
    Day:
      value: DAY
    DayOfTheWeek:
      value: DAY_OF_WEEK
      day: True    
  airlinesdimension:
    IataAirline:
      value: IATA_AIRLINE
    Airline:
      value: AIRLINE
  locationdimension:
    IataAirport:
      value: IATA_AIRPORT
    Airport:
      value: AIRPORT
    Country:
      value: CITY
    City:
      value: STATE
    State:
      value: COUNTRY
  flight:
    DateID:
      fk: datedimension
    IataAirline:
      fk: airlinesdimension
      value: IATA_AIRLINE
    TailNumber:
      fk: airlinesdimension
      value: TAIL_NUMBER
    OriginAirport:
      fk: locationdimension
      value: ORIGIN_AIRPORT
    DestinationAirport:
      fk: locationdimension
      value: DESTINATION_AIRPORT
    Distance:
      value: DISTANCE
    ScheduledDeparture:
      value: SCHEDULED_DEPARTURE
    DepartureTime:
      value: DEPARTURE_TIME
    DelayDeparture:
      value: DEPARTURE_DELAY
    ScheduledTime:
      value: SCHEDULED_TIME
    ScheduledArrival:
      value: SCHEDULED_ARRIVAL
    ArrivalTime:
      value: ARRIVAL_TIME
    DelayArrival:
      value: ARRIVAL_DELAY
    
config:
  airlinesdimension:
    design: dimension
    id: IataAirline
    onDuplicate:
        method: ignore
    onNull:
      method: ignore
  datedimension:
    design: 
      value: dimension
      hash: 
        base: [Year, Month, Day]
        mapping: DateID
    id: DateID
    onDuplicate:
        method: ignore
    onNull:
      method: ignore
  locationdimension:
    design: dimension
    id: IataAirport
    onDuplicate:
        method: ignore
    onNull:
      method: ignore
  flight:
    design: fact
    id: [DateID, IataAirline, TailNumber, ScheduledDeparture]
    onDuplicate:
      method: ignore
    onNull:
      method: substitution
      criteria:
        TailNumber: N00000
        DepartureTime: ScheduledDeparture
        DelayDeparture: 0
        ScheduledTime: Unknown
        ArrivalTime: ScheduledArrival
        DelayArrival: 0